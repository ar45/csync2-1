16,17d15
< Trying to fetch a row from the database.
< Trying to fetch a row from the database.
20,22d17
< Trying to fetch a row from the database.
< DB get blob: other Trying to fetch a row from the database.
< DB get blob: peer Trying to fetch a row from the database.
24,29c19
< SQL: SELECT filename, operation, other, checktxt, forced  FROM dirty WHERE peername = 'peer' AND myname = 'local' ORDER by filename ASC
< Trying to fetch a row from the database.
< DB get blob: /export/home/dennis/Projects/csync2/csync2/tests/test/local DB get blob: MOD DB get blob: (null) DB get blob: v2:mtime=1413417732:mode=16877:user=dennis:group=schafroth:type=dir DB get blob: 0 Trying to fetch a row from the database.
< DB get blob: /export/home/dennis/Projects/csync2/csync2/tests/test/local/B DB get blob: RM DB get blob: (null) DB get blob: v2:mtime=1413417725:mode=33188:user=dennis:group=schafroth:type=reg:size=2 DB get blob: 0 Trying to fetch a row from the database.
< DB get blob: /export/home/dennis/Projects/csync2/csync2/tests/test/local/C DB get blob: NEW DB get blob: (null) DB get blob: v2:mtime=1413417725:mode=33188:user=dennis:group=schafroth:type=reg:size=2 DB get blob: 0 Trying to fetch a row from the database.
< DB get blob: /export/home/dennis/Projects/csync2/csync2/tests/test/local/Z DB get blob: RM DB get blob: (null) DB get blob: v2:mtime=1413417725:mode=33188:user=dennis:group=schafroth:type=reg:size=2 DB get blob: 0 Trying to fetch a row from the database.
---
> SQL: SELECT filename, operation, other, forced  FROM dirty WHERE peername = 'peer' AND myname = 'local' ORDER by filename ASC
32,60d21
< local> CONFIG 
< local> HELLO local
< Dirty (deleted) item /export/home/dennis/Projects/csync2/csync2/tests/test/local/Z RM 0 
< SQL: SELECT filename, checktxt FROM dirty WHERE device = 4323645 and inode = 139673885417056 and peername = 'peer' and filename != '/export/home/dennis/Projects/csync2/csync2/tests/test/local/Z' 
< Trying to fetch a row from the database.
< 0 files with same dev:inode (4323645:139673885417056) as file: /export/home/dennis/Projects/csync2/csync2/tests/test/local/Z
< SQL Query finished.
< Match (+): /export/home/dennis/Projects/csync2/csync2/tests/test/local on /export/home/dennis/Projects/csync2/csync2/tests/test/local/Z
< Deleting peer:/export/home/dennis/Projects/csync2/csync2/tests/test/local/Z
< local> SIG 9iNlOKBHPfeAtRpsCgaQqTwKuGmEVZGB4vCM2ALNvBDDKIZDnoAaK0209kviFLAV %25test%25/Z user/group
< csync_cmpchecktxt A: v2:mtime=0:mode=33188:user=dennis:group=schafroth:type=reg:size=2 
< csync_cmpchecktxt B: v2:mtime=0:mode=33188:user=dennis:group=schafroth:type=reg:size=2 
< File is different on peer (cktxt char #73).
< >>> PEER:  v2:mtime=0:mode=33188:user=dennis:group=schafroth:type=reg:size=2
< >>> LOCAL: ---
< Csync2 / Librsync: csync_rs_check('/export/home/dennis/Projects/csync2/csync2/tests/test/local/Z', 0 [non-regular file])
< Opening basis_file and sig_file..
< Tempfilename is csync2.MCDcTY
< Reading signature size from peer....
< Signature size differs: local=0, peer=32
< Receiving 32 bytes ..
< Found EOF in local sig file.
< Found diff in sig at -32:-0
< Got 32 bytes, 0 bytes left ..
< File has been checked successfully (difference found).
< File is different on peer (rsync sig).
< local> DEL 9iNlOKBHPfeAtRpsCgaQqTwKuGmEVZGB4vCM2ALNvBDDKIZDnoAaK0209kviFLAV %25test%25/Z
< Remove dirty-file entry. SQL: DELETE FROM dirty WHERE filename = '/export/home/dennis/Projects/csync2/csync2/tests/test/local/Z' AND peername = 'peer'
< Directory /export/home/dennis/Projects/csync2/csync2/tests/test/local
62,89d22
< Dirty (deleted) item /export/home/dennis/Projects/csync2/csync2/tests/test/local/B RM 0 
< SQL: SELECT filename, checktxt FROM dirty WHERE device = 2065 and inode = 1810433 and peername = 'peer' and filename != '/export/home/dennis/Projects/csync2/csync2/tests/test/local/B' 
< Trying to fetch a row from the database.
< DB get blob: /export/home/dennis/Projects/csync2/csync2/tests/test/local/C DB get blob: v2:mtime=1413417725:mode=33188:user=dennis:group=schafroth:type=reg:size=2 Trying to fetch a row from the database.
< 1 files with same dev:inode (2065:1810433) as file: /export/home/dennis/Projects/csync2/csync2/tests/test/local/B
< SQL Query finished.
< Other file found. Posible MOVE operation: /export/home/dennis/Projects/csync2/csync2/tests/test/local/C
< csync_cmpchecktxt A: v2:mtime=1413417725:mode=33188:user=dennis:group=schafroth:type=reg:size=2 
< csync_cmpchecktxt B: v2:mtime=1413417725:mode=33188:user=dennis:group=schafroth:type=reg:size=2 
< OPERATION: MOVE /export/home/dennis/Projects/csync2/csync2/tests/test/local/B to /export/home/dennis/Projects/csync2/csync2/tests/test/local/C
< Move operation found: /export/home/dennis/Projects/csync2/csync2/tests/test/local/B => /export/home/dennis/Projects/csync2/csync2/tests/test/local/C. Skipping delete.
< check: /export/home/dennis/Projects/csync2/csync2/tests/test/local 54, /export/home/dennis/Projects/csync2/csync2/tests/test/local/ 60, 54.
< Match (+): /export/home/dennis/Projects/csync2/csync2/tests/test/local on /export/home/dennis/Projects/csync2/csync2/tests/test/local
< uid dennis gid schafroth
< Updating 'peer:/export/home/dennis/Projects/csync2/csync2/tests/test/local' MOD ''
< local> SIG 9iNlOKBHPfeAtRpsCgaQqTwKuGmEVZGB4vCM2ALNvBDDKIZDnoAaK0209kviFLAV %25test%25 user/group 1000 1000 dennis schafroth 16877 1413417732 
< Flags for gencheck: 113 
< csync_cmpchecktxt A: v2:mtime=0:mode=16877:user=dennis:group=schafroth:type=dir 
< csync_cmpchecktxt B: v2:mtime=0:mode=16877:user=dennis:group=schafroth:type=dir 
< Csync2 / Librsync: csync_rs_check('/export/home/dennis/Projects/csync2/csync2/tests/test/local', 0 [non-regular file])
< Opening basis_file and sig_file..
< Tempfilename is csync2.4rA1FW
< Reading signature size from peer....
< Receiving 0 bytes ..
< File has been checked successfully (files are equal).
< ?S: peer            /export/home/dennis/Projects/csync2/csync2/tests/test/local
< check move MOD /export/home/dennis/Projects/csync2/csync2/tests/test/local (null) Remove dirty-file entry. SQL: DELETE FROM dirty WHERE filename = '/export/home/dennis/Projects/csync2/csync2/tests/test/local' AND peername = 'peer'
< Directory /export/home/dennis/Projects/csync2/csync2/tests/test
92,94c25
< Updating 'peer:/export/home/dennis/Projects/csync2/csync2/tests/test/local/C' MV '/export/home/dennis/Projects/csync2/csync2/tests/test/local/B'
< local> FLUSH 9iNlOKBHPfeAtRpsCgaQqTwKuGmEVZGB4vCM2ALNvBDDKIZDnoAaK0209kviFLAV %25test%25/C
< local> SIG 9iNlOKBHPfeAtRpsCgaQqTwKuGmEVZGB4vCM2ALNvBDDKIZDnoAaK0209kviFLAV %25test%25/C user/group 1000 1000 dennis schafroth 33188 1413417725 
---
> Updating 'peer:/export/home/dennis/Projects/csync2/csync2/tests/test/local/C' MV '/export/home/dennis/Projects/csync2/csync2/tests/test/local/Z'
103c34
< Tempfilename is csync2.BtIctU
---
> Tempfilename is csync2.aVxgDH
111,129c42,43
< check move MV /export/home/dennis/Projects/csync2/csync2/tests/test/local/C /export/home/dennis/Projects/csync2/csync2/tests/test/local/B local> MV 9iNlOKBHPfeAtRpsCgaQqTwKuGmEVZGB4vCM2ALNvBDDKIZDnoAaK0209kviFLAV %25test%25/B %25test%25/C
< While syncing file: /export/home/dennis/Projects/csync2/csync2/tests/test/local/B
< ERROR from peer: No such file or directory (/export/home/dennis/Projects/csync2/csync2/tests/test/peer/B)
< Failed to MV /export/home/dennis/Projects/csync2/csync2/tests/test/local/B /export/home/dennis/Projects/csync2/csync2/tests/test/local/C 
< ERROR: move failed: /export/home/dennis/Projects/csync2/csync2/tests/test/local/C /export/home/dennis/Projects/csync2/csync2/tests/test/local/B local> PATCH 9iNlOKBHPfeAtRpsCgaQqTwKuGmEVZGB4vCM2ALNvBDDKIZDnoAaK0209kviFLAV %25test%25/C - 1000 1000 dennis schafroth 33188 1413417725 
< Csync2 / Librsync: csync_rs_delta('/export/home/dennis/Projects/csync2/csync2/tests/test/local/C')
< Receiving sig_file from peer..
< Receiving 12 bytes ..
< Got 12 bytes, 0 bytes left ..
< Opening new_file and delta_file..
< Running rs_build_hash_table() from librsync..
< Running rs_delta_file() from librsync..
< Sending delta_file to peer..
< Sending octet-stream of 9 bytes
< local> octet-stream 9
< Delta has been created successfully.
< clear dirty with rc 4
< Remove dirty-file entry. SQL: DELETE FROM dirty WHERE filename = '/export/home/dennis/Projects/csync2/csync2/tests/test/local/C' AND peername = 'peer'
< Directory /export/home/dennis/Projects/csync2/csync2/tests/test/local
---
> Succes: MV /export/home/dennis/Projects/csync2/csync2/tests/test/local/Z /export/home/dennis/Projects/csync2/csync2/tests/test/local/C
> Delete moved file from dirty SQL: DELETE FROM dirty WHERE (filename = '/export/home/dennis/Projects/csync2/csync2/tests/test/local/C' OR filename = '/export/home/dennis/Projects/csync2/csync2/tests/test/local/Z') AND peername = 'peer'
131,147d44
< Match (+): /export/home/dennis/Projects/csync2/csync2/tests/test/local on /export/home/dennis/Projects/csync2/csync2/tests/test/local/C
< uid dennis gid schafroth
< Updating 'peer:/export/home/dennis/Projects/csync2/csync2/tests/test/local/C' NEW ''
< local> SIG 9iNlOKBHPfeAtRpsCgaQqTwKuGmEVZGB4vCM2ALNvBDDKIZDnoAaK0209kviFLAV %25test%25/C user/group 1000 1000 dennis schafroth 33188 1413417725 
< Flags for gencheck: 113 
< csync_cmpchecktxt A: v2:mtime=0:mode=33188:user=dennis:group=schafroth:type=reg:size=2 
< csync_cmpchecktxt B: v2:mtime=0:mode=33188:user=dennis:group=schafroth:type=reg:size=2 
< Csync2 / Librsync: csync_rs_check('/export/home/dennis/Projects/csync2/csync2/tests/test/local/C', 1 [regular file])
< Opening basis_file and sig_file..
< Tempfilename is csync2.dyuciS
< Running rs_sig_file() from librsync....
< Reading signature size from peer....
< Receiving 32 bytes ..
< Got 32 bytes, 0 bytes left ..
< File has been checked successfully (files are equal).
< ?S: peer            /export/home/dennis/Projects/csync2/csync2/tests/test/local/C
< check move NEW /export/home/dennis/Projects/csync2/csync2/tests/test/local/C (null) Remove dirty-file entry. SQL: DELETE FROM dirty WHERE filename = '/export/home/dennis/Projects/csync2/csync2/tests/test/local/C' AND peername = 'peer'
150,166c47,48
< Setting directory time /export/home/dennis/Projects/csync2/csync2/tests/test/local 1413417733.
< local> SETTIME 9iNlOKBHPfeAtRpsCgaQqTwKuGmEVZGB4vCM2ALNvBDDKIZDnoAaK0209kviFLAV %25test%25 1413417733 
< Skipping directory update /export/home/dennis/Projects/csync2/csync2/tests/test on peer - not in my groups.
< Match (+): /export/home/dennis/Projects/csync2/csync2/tests/test/local on /export/home/dennis/Projects/csync2/csync2/tests/test/local
< Setting directory time /export/home/dennis/Projects/csync2/csync2/tests/test/local 1413417733.
< local> SETTIME 9iNlOKBHPfeAtRpsCgaQqTwKuGmEVZGB4vCM2ALNvBDDKIZDnoAaK0209kviFLAV %25test%25 1413417733 
< Match (+): /export/home/dennis/Projects/csync2/csync2/tests/test/local on /export/home/dennis/Projects/csync2/csync2/tests/test/local
< Setting directory time /export/home/dennis/Projects/csync2/csync2/tests/test/local 1413417733.
< local> SETTIME 9iNlOKBHPfeAtRpsCgaQqTwKuGmEVZGB4vCM2ALNvBDDKIZDnoAaK0209kviFLAV %25test%25 1413417733 
< local> BYE
< SQL: SELECT filename, operation, other, checktxt, forced  FROM dirty WHERE peername = 'other' AND myname = 'local' ORDER by filename ASC
< Trying to fetch a row from the database.
< DB get blob: /export/home/dennis/Projects/csync2/csync2/tests/test/local DB get blob: MOD DB get blob: (null) DB get blob: v2:mtime=1413417732:mode=16877:user=dennis:group=schafroth:type=dir DB get blob: 0 Trying to fetch a row from the database.
< DB get blob: /export/home/dennis/Projects/csync2/csync2/tests/test/local/A DB get blob: RM DB get blob: (null) DB get blob: v2:mtime=1413417725:mode=33188:user=dennis:group=schafroth:type=reg:size=2 DB get blob: 0 Trying to fetch a row from the database.
< DB get blob: /export/home/dennis/Projects/csync2/csync2/tests/test/local/B DB get blob: RM DB get blob: (null) DB get blob: v2:mtime=1413417725:mode=33188:user=dennis:group=schafroth:type=reg:size=2 DB get blob: 0 Trying to fetch a row from the database.
< DB get blob: /export/home/dennis/Projects/csync2/csync2/tests/test/local/C DB get blob: NEW DB get blob: (null) DB get blob: v2:mtime=1413417725:mode=33188:user=dennis:group=schafroth:type=reg:size=2 DB get blob: 0 Trying to fetch a row from the database.
< DB get blob: /export/home/dennis/Projects/csync2/csync2/tests/test/local/Z DB get blob: RM DB get blob: (null) DB get blob: v2:mtime=1413417725:mode=33188:user=dennis:group=schafroth:type=reg:size=2 DB get blob: 0 Trying to fetch a row from the database.
---
> Setting directory time /export/home/dennis/Projects/csync2/csync2/tests/test/local 1393759174.
> SQL: SELECT filename, operation, other, forced  FROM dirty WHERE peername = 'other' AND myname = 'local' ORDER by filename ASC
173d54
< Trying to fetch a row from the database.
175c56
< Finished with 2 errors.
---
> Finished with 1 errors.
